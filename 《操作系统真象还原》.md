# 《操作系统真象还原》

## 第0章 一些你可能正感到迷惑的问题

### 0.1操作系统是什么

如果有一个部落，操作系统相当于管理部落的，协调部落各个人员，保证每天的生产工作有条不紊的进行着。具体一点的说，操作系统负责把资源交给用户进程，使用户进程可以专注于自己的工作，而不用考虑如何获取内存中需要的资源，同时为了保证资源的安全性和完整性，用户进程无法直接访问内存。

eg. Linux系统中的内存管理，分别记录哪些page是Active，哪些是“脏页”。但不记录也不会影响程序的正常运行，记录这些状态是为了更好地管理内存，比如结婚要登记，不登记也不影响两个人在一起，但是登记了方便预测国家未来人口趋势。



### 0.4软件是如何访问硬件

显卡是是显示器的适配器，CPU不直接和显示器交互，它只和显卡通信，显卡的内存叫显存，往显存上写字节就是往显示器打印内容。

访问IO接口本质上就是访问IO接口上的寄存器。



### 0.5应用程序是什么，和操作系统是如何配合到一起的

- 应用程序和操作系统都是软件。

- 操作系统是人想出来的，为了让自己管理计算机方便而创造出来的一套管理办法。

- 应用程序要用某种语言编写，而语言又是编译器来提供的。其实根本就没有什么语言，有的只是编译 器。是编译器决定怎样解释某种关键字及某种语法。

- 应用程序加上操作系统提供功能才算是完整的程序。

- 用户态与内核态是对 CPU 来讲的，是指 CPU 运行在用户态（特权 3 级）还是内核态（特权 0 级）， 很多人误以为是对用户进程来讲的。

- 用户进程陷入内核态是指：由于内部或外部中断发生，当前进程被暂时终止执行，其上下文被内核的 中断程序保存起来后，开始执行一段内核的代码。是内核的代码，不是用户程序在内核的代码，用户代码 怎么可能在内核中存在，所以“用户态与内核态”是对 CPU 来说的。操作系统是独立的部分，用户进程永远不会因为进入内核态而变身为操作系统了。（中断用户程序进程，运行内核程序进程，二者完全不同）

